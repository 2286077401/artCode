(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/chat/chat"],{100:function(e,t,n){"use strict";n.r(t);var o=n(101);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},101:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return a})),n.d(t,"staticRenderFns",(function(){return r})),n.d(t,"recyclableRender",(function(){return s})),n.d(t,"components",(function(){return o}));try{o={tnFab:function(){return n.e("tuniao-ui/components/tn-fab/tn-fab").then(n.bind(null,408))},uniTransition:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-transition/components/uni-transition/uni-transition")]).then(n.bind(null,415))},tnLoading:function(){return n.e("tuniao-ui/components/tn-loading/tn-loading").then(n.bind(null,421))},textVoice:function(){return n.e("components/textVoice/textVoice").then(n.bind(null,428))}}}catch(i){if(-1===i.message.indexOf("Cannot find module")||-1===i.message.indexOf(".vue"))throw i;console.error(i.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var a=function(){var e=this,t=e.$createElement;e._self._c},s=!1,r=[];a._withStripped=!0},102:function(e,t,n){"use strict";n.r(t);var o=n(103),a=n.n(o);for(var s in o)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=a.a},103:function(e,t,n){"use strict";(function(e){var o=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(104)),s=o(n(106)),r=n(69),i=(n(107),function(){Promise.all([n.e("common/vendor"),n.e("components/ua2-markdown/ua-markdown")]).then(function(){return resolve(n(435))}.bind(null,n)).catch(n.oe)}),c={name:"TemplateLoading",components:{uaMarkdown:i},data:function(){return{isLoading:!1,chat:[],openData:{messages:[]},problem:"",answer:"",currentAnswerIndex:-1,webSocketClient:null,upOption:{use:!1,noMoreSize:0},downOption:{auto:!1},scrollTop:9999999999,left:"auto",right:40,bottom:300,width:64,height:64,iconSize:48,backgroundColor:"#01BEFF",fontColor:"#FFFFFF",icon:"open",animationType:"around",showMask:!0,btnList:[{icon:"link",text:"链接",bgColor:"#E72F8C"},{icon:"clear",text:"清屏",textSize:32,bgColor:"#FF7043"},{icon:"share-triangle",text:"分享",iconSize:32,iconColor:"#AAAAAA",bgColor:"#24F083"}],statusBarHeight:20}},onLoad:function(){var t=this;this.statusBarHeight=e.getSystemInfoSync().statusBarHeight+"px",e.getStorageSync("gptType")&&(e.setNavigationBarTitle({title:e.getStorageSync("gptType").templateName}),this.chat.push({type:"text",problem:e.getStorageSync("gptType").templateName,answer:""}),this.openData.messages.push({role:"user",content:e.getStorageSync("gptType").content}),(0,r.wenxinChat)(this.openData).then((function(e){t.isLoading=!1,200==e.code?(t.askInfo=e.data.messages[e.data.messages.length-1].content,t.openData.messages=e.data.messages,t.chat.push({type:"text",problem:"",answer:t.askInfo})):(t.openData.messages=e.data.messages,t.chat.push({type:"text",problem:"",answer:"error"}))})))},beforeDestroy:function(){},onHide:function(){this.isLoading=!1,this.Audio()},onUnload:function(){this.isLoading=!1,this.Audio()},methods:{Audio:function(){e.$emit("stop")},clickFabItem:function(e){switch(e.index){case 0:this.$tn.message.toast("暂未开放");break;case 1:this.openData.messages=[],this.chat=[],this.getChat(),this.$tn.message.toast("已清屏");break;case 2:this.$tn.message.toast("暂未开放");break}},scroll:function(e){},getChat:function(){this.chat.push({type:"text",problem:"",answer:this.askInfo})},copy:function(t){e.setClipboardData({data:this.answer||t,success:function(){e.showToast({title:"复制成功",icon:"none"})}})},getAnswer:function(){var t=this;return(0,s.default)(a.default.mark((function n(){var o;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.getStorageSync("user"),t.currentAnswerIndex=t.chat.length,t.problem){n.next=5;break}return e.showToast({title:"你还没有输入问题呢！",icon:"none"}),n.abrupt("return");case 5:t.isLoading=!0,t.chat.push({type:"text",problem:t.problem,answer:""}),o={role:"user",content:t.problem},t.openData.messages.push(o),t.problem="",setTimeout((function(){t.scrollTop=t.scrollTop+1}),100),(0,r.wenxinChat)(t.openData).then((function(e){t.isLoading=!1,200==e.code?(t.askInfo=e.data.messages[e.data.messages.length-1].content,t.openData.messages=e.data.messages,t.chat.push({type:"text",problem:"",answer:t.askInfo}),setTimeout((function(){t.scrollTop=t.scrollTop+1}),100)):(t.$nextTick((function(){t.scrollTop=999999999})),t.openData.messages=e.data.messages,t.chat.push({type:"text",problem:"",answer:"error"}))}));case 12:case"end":return n.stop()}}),n)})))()}}};t.default=c}).call(this,n(2)["default"])},108:function(e,t,n){"use strict";n.r(t);var o=n(109),a=n.n(o);for(var s in o)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=a.a},109:function(e,t,n){},98:function(e,t,n){"use strict";(function(e,t){var o=n(4);n(26);o(n(25));var a=o(n(99));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n(1)["default"],n(2)["createPage"])},99:function(e,t,n){"use strict";n.r(t);var o=n(100),a=n(102);for(var s in a)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(s);n(108);var r,i=n(33),c=Object(i["default"])(a["default"],o["render"],o["staticRenderFns"],!1,null,"bf16e7f4",null,!1,o["components"],r);c.options.__file="pages/chat/chat.vue",t["default"]=c.exports}},[[98,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/chat/chat.js.map