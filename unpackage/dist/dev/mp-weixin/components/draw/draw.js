(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/draw/draw"],{357:function(t,e,n){"use strict";n.r(e);var o=n(358),i=n(360);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n(362);var a,s=n(33),c=Object(s["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,"071d1df8",null,!1,o["components"],a);c.options.__file="components/draw/draw.vue",e["default"]=c.exports},358:function(t,e,n){"use strict";n.r(e);var o=n(359);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},359:function(t,e,n){"use strict";var o;n.r(e),n.d(e,"render",(function(){return i})),n.d(e,"staticRenderFns",(function(){return a})),n.d(e,"recyclableRender",(function(){return r})),n.d(e,"components",(function(){return o}));try{o={tnEmpty:function(){return n.e("tuniao-ui/components/tn-empty/tn-empty").then(n.bind(null,467))},tnPopup:function(){return Promise.all([n.e("common/vendor"),n.e("tuniao-ui/components/tn-popup/tn-popup")]).then(n.bind(null,453))},tnSubsection:function(){return Promise.all([n.e("common/vendor"),n.e("tuniao-ui/components/tn-subsection/tn-subsection")]).then(n.bind(null,657))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.drwData.prompt.length);t._isMounted||(t.e0=function(e){t.showPop=!0},t.e1=function(e){t.showPop=!1}),t.$mp.data=Object.assign({},{$root:{g0:n}})},r=!1,a=[];i._withStripped=!0},360:function(t,e,n){"use strict";n.r(e);var o=n(361),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},361:function(t,e,n){"use strict";(function(t,o){var i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(11)),a=n(30),s=n(69);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u=function(){n.e("components/draw/styleDetail").then(function(){return resolve(n(664))}.bind(null,n)).catch(n.oe)},d={computed:{computed:l({},(0,a.mapState)(["imageData","imageIsLoad"])),gridItemWidth:function(){return 100/this.col+"%"}},components:{styleDetail:u},data:function(){return{showPramList:!1,showPop:!1,choseSize:90,sizeList:[{name:"头像图",size:"1:1",path:"https://oss.laf.run/nupa44-bits/size/1b1.png"},{name:"手机屏幕",size:"2:1",path:"https://oss.laf.run/nupa44-bits/size/2b1.png"},{name:"文章配图",size:"4:3",path:"https://oss.laf.run/nupa44-bits/size/4b3.png"},{name:"社交媒体",size:"3:4",path:"https://oss.laf.run/nupa44-bits/size/3b4.png"},{name:"电脑壁纸",size:"16:9",path:"https://oss.laf.run/nupa44-bits/size/16b9.png"},{name:"宣传海报",size:"9:16",path:"https://oss.laf.run/nupa44-bits/size/9b16.png"}],isSave:!0,manner:[{icon:"brand",title:"插画",color:"red",select:!1},{icon:"brand",title:"动漫风",color:"cyan",select:!1},{icon:"brand",title:"虚幻引擎",color:"blue",select:!1},{icon:"brand",title:"电影打光",color:"green",select:!1},{icon:"fire-fill",title:"赛博朋克",color:"orange",select:!1},{icon:"brand",title:"超现实主义",color:"purplered",select:!1},{icon:"brand",title:"油画",color:"purple",select:!1},{icon:"brand",title:"国画",color:"orangered",select:!1},{icon:"brand",title:"水彩",color:"orangeyellow",select:!1}],artist:[{icon:"light",title:"齐白石",color:"red",select:!1},{icon:"light",title:"爱德华·利尔",color:"cyan",select:!1},{icon:"light",title:"梵高",color:"blue",select:!1},{icon:"light",title:"伦勃朗",color:"green",select:!1},{icon:"light",title:"常玉",color:"orange",select:!1},{icon:"fire-fill",title:"吴冠中",color:"purplered",select:!1},{icon:"light",title:"穆夏",color:"purple",select:!1},{icon:"light",title:"毕加索",color:"orangered",select:!1},{icon:"light",title:"李可染",color:"orangeyellow",select:!1}],currentIndex:0,col:3,drwData:{action:"generate",prompt:"",image_id:"",timeout:6e4,callback_url:""},ImageIndex:"9999",menuList:[],menuLisTitle:[],menuChild:[],styleIndex:0,randomStyle:""}},onShow:function(){this.imageData,this.imageIsLoad},mounted:function(){},methods:{changeData:function(t){this.menuChild=this.menuList[t.index].list,console.log(this.menuChild)},getSocketResu:function(){this.getStatus()},getStatus:function(){(0,s.gitUserState)().then((function(e){200==e.code?e.isLoading&&t.showToast({title:"正在绘制，具体绘制结果在画夹查看",icon:"none"}):t.showToast({title:"查询失败",icon:"none"})}))},choseSizeData:function(t,e){var n=/ --ar (.*)/;n.test(this.drwData.prompt)?(this.drwData.prompt=this.drwData.prompt.replace(new RegExp("--ar\\s+\\S+","g"),""),this.drwData.prompt=this.drwData.prompt.replace(/(^\s*)|(\s*$)/g,"")+" "+t):this.drwData.prompt+=" "+t,this.choseSize=e},showProm:function(){this.showPramList=!0},getProList:function(){var e=this;this.menuLisTitle=[],t.getStorageSync("MENU_LIST")?(this.menuList=t.getStorageSync("MENU_LIST"),this.menuList.map((function(t){e.menuLisTitle.push(t.type)})),console.log(this.menuLisTitle)):(0,s.gitDrowproList)().then((function(n){if(200==n.code){console.log(n),e.menuList=n.data,t.setStorageSync("MENU_LIST",n.data);var o=e.menuList[Math.floor(Math.random()*e.menuList.length)].list,i=o[Math.floor(Math.random()*o.length)];e.randomStyle=i.detail+i.keyword,e.menuList.map((function(t){e.menuLisTitle.push(t.type)}))}}))},getRandomStyle:function(){if(this.drwData.prompt.length>=500);else{var t=this.menuList[Math.floor(Math.random()*this.menuList.length)].list,e=t[Math.floor(Math.random()*t.length)];this.randomStyle=e.detail+e.keyword,this.drwData.prompt+=" "+e.keyword}},saveImage:function(){o.showLoading({title:"加载中..."}),o.downloadFile({url:this.imageData.image_url,success:function(t){o.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(t){o.hideLoading(),o.showModal({title:"提示",content:"保存成功",modalType:!1})},fail:function(t){"saveImageToPhotosAlbum:fail:auth denied"!==t.errMsg&&"saveImageToPhotosAlbum:fail auth deny"!==t.errMsg&&"saveImageToPhotosAlbum:fail authorize no response"!==t.errMsg||o.showModal({title:"提示",content:"需要您授权保存相册",modalType:!1,success:function(t){o.openSetting({success:function(t){t.authSetting["scope.writePhotosAlbum"]?o.showModal({title:"提示",content:"获取权限成功,再次点击按钮即可保存",modalType:!1}):o.showModal({title:"提示",content:"获取权限失败，将无法保存到相册",modalType:!1})},fail:function(t){console.log("failData",t)},complete:function(t){console.log("finishData",t)}})}})},complete:function(t){o.hideLoading()}})}})},useImage:function(e,n){var o=this;t.showModal({title:"提示",content:"v"==n?"是否确认精修当前风格图？":"是否确认放大当前图片？",cancelText:"取消",confirmText:"确认",showCancel:!0,confirmColor:"#999999",cancelColor:"#39B54A",success:function(t){t.confirm&&(o.isSave="u"==n,o.drwData.image_id=o.imageData.image_id,o.drwData.action=e,o.currentIndex=0,o.drwData.prompt="",o.$store.dispatch("mjImageDrw",o.drwData))}})},tn:function(e){t.navigateTo({url:e,fail:function(t){console.log(t)}})},handleMannerClick:function(t){this.styleIndex=t},handleArtistClick:function(t){},choseImageIndex:function(t){this.ImageIndex=t},mjImageDrw:function(){return this.imageIsLoad?(t.showToast({title:"不要着急，正在努力生成！",icon:"none"}),!1):""==this.drwData.prompt?(t.showToast({title:"请先输入描述词",icon:"none"}),!1):(this.currentIndex=0,this.drwData.image_id="",this.$store.dispatch("mjImageDrw",this.drwData),void t.showModal({title:"提示",content:"绘制开始是否前往画夹查看？",cancelText:"取消",confirmText:"确认",showCancel:!0,confirmColor:"#999999",cancelColor:"#39B54A",success:function(e){e.confirm&&t.navigateTo({url:"/pages/history/history"})}}))}}};e.default=d}).call(this,n(2)["default"],n(1)["default"])},362:function(t,e,n){"use strict";n.r(e);var o=n(363),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},363:function(t,e,n){}}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/components/draw/draw.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/draw/draw-create-component',
    {
        'components/draw/draw-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('2')['createComponent'](__webpack_require__(357))
        })
    },
    [['components/draw/draw-create-component']]
]);
